"0","# lookup table to fix region codes"
"0","mx_codes <- ebird_regions %>% "
"0","  filter(region_level == ""subnational1"", str_detect(region_code, ""^MX"")) %>% "
"0","  select(region_name, region_code) %>% "
"0","  deframe()"
"0","# state boundaries"
"0","na_states <- ne_states(iso_a2 = c(""CA"", ""US"", ""MX""), returnclass = ""sf"") %>% "
"0","  mutate(region_code = if_else(iso_a2 == ""MX"", mx_codes[name], iso_3166_2)) %>% "
"0","  select(region_code, country = iso_a2, state = postal)"
"0","# join attribute and spatial data"
"0","ebird_states <- ebird_regions %>% "
"0","  filter(region_level == ""subnational1"", region_name != ""Hawaii"") %>% "
"0","  select(region_code, region_name, n_species) %>% "
"0","  inner_join(na_states, ., by = ""region_code"")"
"2","Column `region_code` has different attributes on LHS and RHS of join"
